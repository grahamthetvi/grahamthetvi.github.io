<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="CVI Type Talker - An accessible typing application for students with Cortical Visual Impairment. Type words to hear them spoken and see real images.">
    <meta name="theme-color" content="#000000">
    <title>CVI Type Talker</title>
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <a href="#typing-area" class="skip-link">Skip to typing area</a>
 
    <main id="app" class="app-container" role="application"
          aria-label="CVI Type Talker - Type words to hear them spoken and see images">
 
        <!-- Left panel: typing display -->
        <section id="typing-area" class="typing-panel">
            <div id="text-display" class="text-display" role="textbox"
                 aria-multiline="true" aria-label="Typed text display" tabindex="0">
                <span id="current-line" class="current-line"></span>
                <span class="cursor" aria-hidden="true">|</span>
            </div>
        </section>
 
        <!-- Right panel: image display -->
        <aside id="image-panel" class="image-panel" aria-live="polite">
            <div id="image-container" class="image-container">
                <img id="word-image" src="" alt="" class="word-image" hidden>
                <p id="image-label" class="image-label">Type a word!</p>
                <p id="image-attribution" class="image-attribution" aria-hidden="true"></p>
            </div>
        </aside>
    </main>
 
    <!-- Status bar -->
    <footer id="status-bar" class="status-bar" role="status" aria-live="polite">
        <p id="status-text">Type a letter to begin</p>
    </footer>
 
    <!-- Instructions overlay -->
    <div id="instructions-overlay" class="overlay" role="dialog"
         aria-labelledby="instructions-title" aria-modal="true">
        <div class="overlay-content">
            <h1 id="instructions-title">CVI Type Talker</h1>
            <p>Type letters to hear them spoken aloud.</p>
            <p>Press <strong>Space</strong> or <strong>Enter</strong> to hear the whole word and see a picture.</p>
            <p>Press <strong>Backspace</strong> to delete a letter.</p>
            <button id="start-button" class="start-button" autofocus>
                Start Typing
            </button>
        </div>
    </div>

    <!-- Settings Panel -->
    <div id="settings-panel" class="settings-panel" role="dialog" aria-labelledby="settings-title" aria-modal="true">
        <div class="settings-content">
            <h2 id="settings-title">Settings</h2>

            <!-- Font Settings -->
            <section class="settings-section">
                <h3>Text Appearance</h3>
                <div class="setting-row">
                    <label for="font-family">Font Type:</label>
                    <select id="font-family">
                        <option value="Arial, sans-serif">Arial</option>
                        <option value="'Comic Sans MS', cursive">Comic Sans</option>
                        <option value="'Courier New', monospace">Courier New</option>
                        <option value="Georgia, serif">Georgia</option>
                        <option value="'Times New Roman', serif">Times New Roman</option>
                        <option value="Verdana, sans-serif">Verdana</option>
                        <option value="'Trebuchet MS', sans-serif">Trebuchet MS</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label for="font-size">Font Size:</label>
                    <input type="range" id="font-size" min="20" max="120" value="60" aria-describedby="font-size-value">
                    <span id="font-size-value" aria-live="polite">60px</span>
                </div>
                <div class="setting-row">
                    <label for="font-color">Font Color:</label>
                    <select id="font-color">
                        <option value="#FFFFFF">White</option>
                        <option value="#000000">Black</option>
                        <option value="#FF0000">Red</option>
                        <option value="#00FF00">Green</option>
                        <option value="#0000FF">Blue</option>
                        <option value="#FFFF00">Yellow</option>
                        <option value="#FF00FF">Magenta</option>
                        <option value="#00FFFF">Cyan</option>
                        <option value="#FFA500">Orange</option>
                        <option value="#800080">Purple</option>
                        <option value="#FFC0CB">Pink</option>
                        <option value="#A52A2A">Brown</option>
                        <option value="#808080">Gray</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label for="background-color">Background Color:</label>
                    <select id="background-color">
                        <option value="#000000">Black</option>
                        <option value="#FFFFFF">White</option>
                        <option value="#FF0000">Red</option>
                        <option value="#00FF00">Green</option>
                        <option value="#0000FF">Blue</option>
                        <option value="#FFFF00">Yellow</option>
                        <option value="#FF00FF">Magenta</option>
                        <option value="#00FFFF">Cyan</option>
                        <option value="#FFA500">Orange</option>
                        <option value="#800080">Purple</option>
                        <option value="#FFC0CB">Pink</option>
                        <option value="#A52A2A">Brown</option>
                        <option value="#808080">Gray</option>
                    </select>
                </div>
            </section>

            <!-- Bubble Letters Settings -->
            <section class="settings-section">
                <h3>Bubble Letters</h3>
                <div class="setting-row">
                    <label for="bubble-letters-enabled">Enable Bubble Letters:</label>
                    <input type="checkbox" id="bubble-letters-enabled">
                </div>
                <div class="setting-row">
                    <label for="bubble-color">Bubble Color:</label>
                    <select id="bubble-color">
                        <option value="#FFFF00">Yellow</option>
                        <option value="#FFFFFF">White</option>
                        <option value="#000000">Black</option>
                        <option value="#FF0000">Red</option>
                        <option value="#00FF00">Green</option>
                        <option value="#0000FF">Blue</option>
                        <option value="#FF00FF">Magenta</option>
                        <option value="#00FFFF">Cyan</option>
                        <option value="#FFA500">Orange</option>
                        <option value="#800080">Purple</option>
                        <option value="#FFC0CB">Pink</option>
                        <option value="#A52A2A">Brown</option>
                        <option value="#808080">Gray</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label for="bubble-size">Bubble Size:</label>
                    <input type="range" id="bubble-size" min="2" max="10" value="4" aria-describedby="bubble-size-value">
                    <span id="bubble-size-value" aria-live="polite">4px</span>
                </div>
            </section>

            <!-- Typing Intensity Settings -->
            <section class="settings-section">
                <h3>Typing Control</h3>
                <div class="setting-row">
                    <label for="typing-interval">Minimum Time Between Keys:</label>
                    <input type="range" id="typing-interval" min="0" max="1000" step="50" value="150" aria-describedby="typing-interval-value">
                    <span id="typing-interval-value" aria-live="polite">150ms</span>
                </div>
                <div class="setting-row">
                    <label for="max-keys-per-second">Max Keys Per Second:</label>
                    <input type="range" id="max-keys-per-second" min="1" max="20" value="10" aria-describedby="max-keys-value">
                    <span id="max-keys-value" aria-live="polite">10</span>
                </div>
            </section>

            <!-- Image Display Settings -->
            <section class="settings-section">
                <h3>Image Display</h3>
                <div class="setting-row">
                    <label for="image-bg-color">Image Panel Background Color:</label>
                    <select id="image-bg-color">
                        <option value="#000000">Black</option>
                        <option value="#FFFFFF">White</option>
                        <option value="#FF0000">Red</option>
                        <option value="#00FF00">Green</option>
                        <option value="#0000FF">Blue</option>
                        <option value="#FFFF00">Yellow</option>
                        <option value="#FF00FF">Magenta</option>
                        <option value="#00FFFF">Cyan</option>
                        <option value="#FFA500">Orange</option>
                        <option value="#800080">Purple</option>
                        <option value="#FFC0CB">Pink</option>
                        <option value="#A52A2A">Brown</option>
                        <option value="#808080">Gray</option>
                    </select>
                </div>
                <div class="setting-row">
                    <label for="remove-background">Remove Image Background:</label>
                    <input type="checkbox" id="remove-background">
                </div>
                <p class="setting-note" id="bg-removal-note">Uses AI to isolate the subject on a transparent background. Downloads a ~30MB model on first use (cached after).</p>
            </section>

            <!-- Image Filter Settings -->
            <section class="settings-section">
                <h3>Image Filtering</h3>
                <div class="setting-row">
                    <label for="filter-profanity">Filter Profanity:</label>
                    <input type="checkbox" id="filter-profanity" checked>
                </div>
                <div class="setting-row">
                    <label for="custom-word-list-enabled">Use Custom Word List Only:</label>
                    <input type="checkbox" id="custom-word-list-enabled">
                </div>
                <div class="setting-row full-width">
                    <label for="custom-word-list">Allowed Words (comma-separated):</label>
                    <textarea id="custom-word-list" rows="4" placeholder="cat, dog, tree, house, car..."></textarea>
                </div>
                <div class="setting-row full-width">
                    <label for="blocked-word-list">Blocked Words (comma-separated):</label>
                    <textarea id="blocked-word-list" rows="3" placeholder="Enter words that should never show images..."></textarea>
                    <p class="setting-note">These words will never show images, regardless of other settings.</p>
                </div>
            </section>

            <div class="settings-buttons">
                <button id="save-settings" class="settings-button primary">Save & Close</button>
                <button id="reset-settings" class="settings-button">Reset to Defaults</button>
                <button id="cancel-settings" class="settings-button">Cancel</button>
            </div>
        </div>
    </div>

    <!-- Settings Button -->
    <button id="settings-button" class="settings-toggle" aria-label="Open Settings">⚙️</button>

    <script src="js/speech.js"></script>
    <script src="js/background-removal.js"></script>
    <script src="js/images.js"></script>
    <script src="js/settings.js"></script>
    <script src="js/display.js"></script>
    <script src="js/keyboard.js"></script>
    <script src="js/app.js"></script>
</body>
</html>